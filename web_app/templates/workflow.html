{% extends "base2.html" %}
{% block title %}Workflow Framework - Welcome{% endblock %}


{% block content %}<div class="main">

<script src="http://www.java.com/js/deployJava.js"></script>
<script type='text/javascript' src='{{STATIC_PREFIX}}javascripts/jquery.jsPlumb-1.3.15-all-min.js'></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/workflow.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/handlers/GaggleMicroformatHandler.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/gaggleData.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/gaggleDataHolder.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/ufmt.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/util.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/gaggleMicroformat.js"></script>

<div id="container">
<div>
<applet id="GaggleProxy" archive="{{ STATIC_PREFIX }}lib/GaggleProxy.jar, {{ STATIC_PREFIX }}lib/gaggle-connector.jar, {{ STATIC_PREFIX }}lib/boss.jar" code="org.systemsbiology.gaggle.geese.proxygoose.GaggleProxyApplet.class" width="0" height="0">
</applet>

Click <a href='http://localhost:8000/static/jnlp/boss.jnlp'>here</a> to start the boss</p>

<input type="text" id="htmlLoader" />
<input type="button" value="Load" onclick="LoadHTML()" />
<input type="button" value="Filter" onclick="FilterHTML()" />
<div id="divHTMLResult"></div>

</div>
<table id="tblWorkflow">
<tbody>
<tr>
<td></td>
<td colspan="2">
<input type="button" value="Run" onclick="SubmitWorkflow()" />
<input type="button" value="Save" onclick="SaveWorkflow()" />
<input type="button" value="Clear" onclick="ClearWorkflowCanvas()" />
</td>
</tr>
<tr>
<td>
<div id="components" style="width:150px; height: 600px">
    {% if wfentries.count > 0 %}
        {% for wfentry in wfentries %}
            <p><strong>{{wfentry.Category.name}}</strong></p>
            <ul>
               {% for component in wfentry.Components %}
                   <li>
                        <div class="component" id='component_{{component.id|stringformat:"i"}}'>
                            <p>{{component.short_name}}</p>
                            <input type="text" value="{{component.serviceurl}}" class="componentchild"
                                    title="Enter the url or path to the executable of the component"/>
                            <input type="text" placeholder="Enter subaction"
                                   title="Enter subaction (for example, a web handler for firegoose)" class="componentchild"/>
                            <input type="text" placeholder="Enter data url"
                                   title="Enter the url of data to be opened by the component" class="componentchild"/>
                        </div>
                   </li>
               {% endfor %}
            </ul>
        {% endfor %}
    {% endif %}
</div>
</td>
<td>
<div id="workflowcanvas" style="background-color: transparent; width:500px; height: 600px"></div>
</td>
<td>
    <div id="divWorkflow">
    <ul>
    {% if myworkflows.count > 0 %}
        {% for workflow in myworkflows %}
            <li><a href='javascript:GetWorkflow("{{workflow.id|stringformat:"i"}}")'>{{workflow.name}}</a></li>
        {% endfor %}
    {% endif %}
    </ul>
    </div>
</td>
</tr>
</tbody>
</table>
</div>

<p id="result"></p>

<div id="dlgSave">
    <div class="window">
        <b>Save Workflow</b>
        <span id="txt">Workflow Name: </span><input type="text" id="inputWFName" />
        <span id="Span1">Description: </span><input type="text" id="inputWFDesc" />
        <br />
        <button onclick="hm('dlgSave');SaveOKSelected()">OK</button><button onclick="hm('box');SaveCancelSelected()">Cancel</button>
    </div>

    <!-- Do not remove div#mask, because you'll need it to fill the whole screen --> 
    <div id="mask"></div>
</div>
<div id="dialog" title="Start Boss">
   <p>Boss is not running. Click <a href='http://localhost:8000/static/jnlp/boss.jnlp'>here</a> to start the boss</p>
</div>
</div>
{% endblock %}