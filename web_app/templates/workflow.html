{% extends "base2.html" %}
{% block title %}Workflow Framework - Welcome{% endblock %}


{% block content %}<div class="main">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />

<script src="http://www.java.com/js/deployJava.js"></script>
<script type='text/javascript' src='{{STATIC_PREFIX}}javascripts/jquery.jsPlumb-1.3.15-all-min.js'></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/workflow.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/jquery.jeditable.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/handlers/GaggleMicroformatHandler.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/gaggleData.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/gaggleDataHolder.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/ufmt.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/util.js"></script>
<script type="text/javascript" src="{{STATIC_PREFIX}}javascripts/gaggleMicroformat.js"></script>

<div id="container">
<div>
<applet id="GaggleProxy" archive="{{ STATIC_PREFIX }}lib/GaggleProxy.jar, {{ STATIC_PREFIX }}lib/gaggle-connector.jar, {{ STATIC_PREFIX }}lib/boss.jar" code="org.systemsbiology.gaggle.geese.proxygoose.GaggleProxyApplet.class" width="0" height="0">
</applet>

<!-- <input type="text" id="htmlLoader" />
<input type="button" value="Load" onclick="LoadHTML()" />
<input type="button" value="Filter" onclick="FilterHTML()" />
<div id="divHTMLResult"></div> -->

</div>
<table id="tblWorkflow" class="tblWorkflow">
<tbody>
<tr>
<td></td>
<td style="width: 600px">
<a href='http://localhost:8000/static/jnlp/boss.jnlp'>start the boss</a>
<input type="button" value="Run" onclick="SubmitWorkflow()" />
<input type="button" value="Save" onclick="SaveClicked()" />
<input type="button" value="Delete" onclick="DeleteClicked()" />
<input type="button" value="Clear" onclick="InitializeWorkflow()" />
</td>
<td style="width: 100px">
</td>
</tr>
<tr>
<td>
<div id="components" class="divcomponents">
    {% if wfentries.count > 0 %}
        {% for wfentry in wfentries %}
            <p><strong>{{wfentry.Category.name}}</strong></p>
            <ul>
               {% for component in wfentry.Components %}
                   <li>
                        <div class="component" id='component_{{component.id|stringformat:"i"}}'>
                        <div class="componenttitle"><a href="{{component.downloadurl}}">{{component.short_name}}</a></div>
                        <img src="/static/images/close.png" class="componentclose" title="Remove from workflow"></img>
                        <input class="componentchildinput" type="text" value="{{component.serviceurl}}"
                                   title="Enter the url or path to the executable of the component"/>
                        <input class="componentchildinput" type="text" value="{{component.arguments}}"
                                   placeholder="Enter the arguments of the component executable"
                                   title="Enter the arguments of the component"/>
                        <input class="componentchildinput" type="text" placeholder="Enter subaction"
                                   title="Enter subaction (for example, a web handler for firegoose)"/>
                        <input class="componentchildinput" type="text" placeholder="Enter data url"
                                   title="Enter the url of data to be opened by the component"/>
                        <input type="hidden" value="{{component.name}}" />
                        </div>
                   </li>
               {% endfor %}
            </ul>
        {% endfor %}
    {% endif %}
</div>
</td>
<td>
<div id="workflowcanvas" style="background-color: transparent; width:500px; height: 600px"></div>
</td>
<td class="tdlistworkflow">
    <div id="divWorkflow" class="divWorkflow">
    <ul>
    {% if myworkflows.count > 0 %}
        {% for workflow in myworkflows %}
            <li id='liwf_{{workflow.id|stringformat:"i"}}'><a href='javascript:GetWorkflow("{{workflow.id|stringformat:"i"}}")'>{{workflow.name}}</a></li>
        {% endfor %}
    {% endif %}
    </ul>
    </div>
</td>
</tr>
</tbody>
</table>
</div>

<p id="result"></p>

<div id="dlgsaveworkflow" class="dlgsaveworkflow" title="Save Workflow">
    <p>Name: <input type="text" /></p>
    <p>Description: <input type="text" /></p>
</div>

<div id="dlgauthenticationalert" class="dlgauthenticationalert" title="Warning">
    <p>Do you want to login and save the workflow?</p>
</div>

<div id="dlgdeletealert" class="dlgauthenticationalert" title="Warning">
    <p>Do you really want to delete the workflow?</p>
</div>

<input id="authenticated" type="hidden" value="{{userid}}" />
</div>
{% endblock %}